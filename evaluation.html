  <!DOCTYPE html>
<html lang="en" class="transition-colors">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>EVALOGOTOR - Tasks</title>

<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = { darkMode: 'class' }
</script>

<script src="https://unpkg.com/lucide@latest"></script>

<style>
  .highlight {
    font-weight: bold;
    font-size: 1.25rem;
    color: rgb(57, 220, 57);
  }
  .status-ue { color: #94a3b8; }

  .nav-btn {
    @apply flex items-center space-x-1 rounded-xl px-3 py-1 text-gray-500 bg-white border border-gray-300 hover:text-blue-600 hover:bg-gray-100 transition-colors;
  }
  .nav-btn.dark-mode {
    @apply text-white bg-[rgb(17,24,38)] border-gray-600 hover:bg-gray-700 hover:text-white;
  }
  .nav-btn.dark-mode:hover {
  @apply bg-gray-700 text-white;
}
</style>
</head>

<body id="body"
  class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-white
         min-h-screen flex flex-col transition-colors">

<!-- ================= NAVBAR ================= -->
<header class="flex items-center justify-between px-6 py-4 shadow-sm bg-white dark:bg-gray-800" id="navbar">
  <div class="flex items-center group cursor-pointer">
    <span class="font-bold text-xl text-blue-600 group-hover:text-[rgb(57,220,57)]">EVA</span>
    <span class="highlight group-hover:text-[rgb(57,220,57)]">LOGO</span>
    <span class="font-bold text-xl text-blue-600 group-hover:text-[rgb(57,220,57)]">TOR</span>
  </div>

  <nav class="flex items-center space-x-4">

    <!-- Nav buttons -->
    <button class="nav-btn" onclick="location.href='/'">
      <i data-lucide="home" class="w-4 h-4"></i> <span id="home">Home</span>
    </button>
    <button class="nav-btn" onclick="location.href='tasks'">
      <i data-lucide="pen-tool" class="w-4 h-4"></i> <span id="tasks">Tasks</span>
    </button>
    <button class="nav-btn" onclick="location.href='scoreboard'">
      <i data-lucide="bar-chart-3" class="w-4 h-4"></i> <span id="scoreboard">Scoreboard</span>
    </button>

    <!-- Login -->
    <button id="loginBtn" class="nav-btn" onclick="location.href='login'">
      <i data-lucide="user" class="w-4 h-4 mr-1"></i> <span id="login">Login</span>
    </button>

    <!-- Theme toggle -->
    <button id="themeToggle" class="nav-btn">
      <i id="themeIcon" data-lucide="moon" class="w-4 h-4 mr-1"></i>
      <span id="themeLabel">Dark</span>
    </button>

    <!-- Language selector -->
    <div id="langWrapper" class="nav-btn flex items-center">
      <i data-lucide="globe" class="w-4 h-4 mr-1"></i>
      <select id="langSelect" class="bg-transparent focus:outline-none text-gray-900 dark:text-white">
        <option value="en">EN</option>
        <option value="de">DE</option>
        <option value="it">IT</option>
        <option value="hr">HR</option>
        <option value="fr">FR</option>
        <option value="ru">RU</option>
      </select>
    </div>

  </nav>
</header>

<!-- ================= MAIN ================= -->
<main class="max-w-5xl mx-auto w-full px-6 pt-28 pb-6 flex flex-col gap-4">

  <div id="taskContext"
       class="rounded-2xl p-4 shadow
              bg-gray-100 dark:bg-gray-800
              font-mono text-[1.15rem] font-medium">
    empty
  </div>

  <textarea id="codeInput"
    class="h-64 w-full rounded-lg p-3 font-mono text-sm
           bg-gray-100 dark:bg-gray-900
           border border-gray-300 dark:border-gray-700"
    placeholder=""></textarea>

  <div class="flex items-center gap-4">
    <button id="evalBtn"
      class="px-6 py-2 rounded-xl bg-blue-600 hover:bg-blue-700
             text-white font-semibold">
      Evaluate
    </button>
    <span id="evalStatus" class="status-ue font-semibold">
      Unevaluated
    </span>
  </div>

</main>

<script>
lucide.createIcons();

/* ========= TRANSLATIONS ========= */
const translations = {
  en: {
    home:"Home", tasks:"Tasks", scoreboard:"Scoreboard", login:"Login",
    dark:"Dark", light:"Light",
    evaluate:"Evaluate",
    unevaluated:"Unevaluated",
    placeholder:"Paste your solution code here...",
    warning:"⚠️ Please paste your solution before evaluation"
  },
  de: {
    home:"Home", tasks:"Aufgaben", scoreboard:"Rangliste", login:"Anmelden",
    dark:"Dunkel", light:"Hell",
    evaluate:"Auswerten",
    unevaluated:"Nicht bewertet",
    placeholder:"Lösungscode hier einfügen...",
    warning:"⚠️ Bitte füge vor der Auswertung deinen Code ein"
  },
  it: {
    home:"Home", tasks:"Compiti", scoreboard:"Classifica", login:"Accedi",
    dark:"Scuro", light:"Chiaro",
    evaluate:"Valuta",
    unevaluated:"Non valutato",
    placeholder:"Incolla qui il codice...",
    warning:"⚠️ Inserisci il codice prima della valutazione"
  },
  hr: {
    home:"Home", tasks:"Zadaci", scoreboard:"Ljestvica", login:"Prijava",
    dark:"Tamno", light:"Svijetlo",
    evaluate:"Procijeni",
    unevaluated:"Neocijenjeno",
    placeholder:"Zalijepite ovdje rješenje...",
    warning:"⚠️ Morate unijeti rješenje prije evaluacije"
  },
  fr: {
    home:"Home", tasks:"Tâches", scoreboard:"Classement", login:"Connexion",
    dark:"Sombre", light:"Clair",
    evaluate:"Évaluer",
    unevaluated:"Non évalué",
    placeholder:"Collez votre code ici...",
    warning:"⚠️ Veuillez coller votre solution avant l’évaluation"
  },
  ru: {
    home:"Home", tasks:"Задания", scoreboard:"Рейтинг", login:"Войти",
    dark:"Тёмный", light:"Светлый",
    evaluate:"Оценить",
    unevaluated:"Неоценено",
    placeholder:"Вставьте ваш код здесь...",
    warning:"⚠️ Пожалуйста, вставьте решение перед оценкой"
  }
};

let lang = localStorage.getItem("lang") || "en";
let darkMode = localStorage.getItem("theme") === "dark";

/* ========= APPLY LANGUAGE ========= */
function applyTranslations(){
  document.getElementById("home").textContent = translations[lang].home;
  document.getElementById("tasks").textContent = translations[lang].tasks;
  document.getElementById("scoreboard").textContent = translations[lang].scoreboard;
  document.getElementById("login").textContent = translations[lang].login;
  document.getElementById("evalBtn").textContent = translations[lang].evaluate;
  document.getElementById("codeInput").placeholder = translations[lang].placeholder;
  document.getElementById("themeLabel").textContent =
    darkMode ? translations[lang].light : translations[lang].dark;

  if(!evalStatus.classList.contains("text-red-500")){
    evalStatus.textContent = translations[lang].unevaluated;
  }else{
    evalStatus.textContent = translations[lang].warning;
  }
}

document.getElementById("langSelect").value = lang;
document.getElementById("langSelect").onchange = e => {
  lang = e.target.value;
  localStorage.setItem("lang", lang);
  applyTranslations();
};

/* ========= THEME ========= */
document.getElementById("themeToggle").onclick = () => {
  darkMode = !darkMode;
  localStorage.setItem("theme", darkMode ? "dark" : "light");
  applyTheme();      // ✅ Update all button styles, labels, and dropdown
  applyTranslations(); // optional if you want to update theme label text
};

/* ========= TASK CONTEXT ========= */
function loadTaskContext(){
  const k = localStorage.getItem("kategorija") || "empty";
  const g = localStorage.getItem("god") || "empty";
  const z = localStorage.getItem("zadatak") || "empty";
  const ko = localStorage.getItem("kolo") || "empty";

  let text = "";
  if(k.toLowerCase()==="hll") text = `HLL → ${g} → ${ko} → ${z}`;
  else if(k.toLowerCase()==="hloz") text = `HLOŽ → ${g} → ${z}`;
  else text = `${k} → ${g} → ${ko} → ${z}`;

  document.getElementById("taskContext").textContent = text;
}

/* ========= EVALUATION WARNING ========= */
const evalBtn = document.getElementById("evalBtn");
const evalStatus = document.getElementById("evalStatus");
const codeInput = document.getElementById("codeInput");

evalBtn.onclick = () => {
  if(!codeInput.value.trim()){
    evalStatus.textContent = translations[lang].warning;
    evalStatus.classList.add("text-red-500");
    return;
  }
  evalStatus.textContent = translations[lang].unevaluated;
  evalStatus.classList.remove("text-red-500");
};

codeInput.oninput = () => {
  if(codeInput.value.trim()){
    evalStatus.textContent = translations[lang].unevaluated;
    evalStatus.classList.remove("text-red-500");
  }
};

function applyTheme() {
  document.documentElement.classList.toggle("dark", darkMode);

  // Add/remove dark-mode class for all nav buttons
  document.querySelectorAll(".nav-btn").forEach(btn => {
    btn.classList.toggle("dark-mode", darkMode);
  });

  // Update theme label text
  document.getElementById("themeLabel").textContent = darkMode ? translations[lang].light : translations[lang].dark;

  // Update lang select options
  document.querySelectorAll("#langSelect option").forEach(opt => {
    opt.style.backgroundColor = darkMode ? "rgb(17,24,38)" : "white";
    opt.style.color = darkMode ? "white" : "black";
  });

  document.getElementById("themeIcon").dataset.lucide = darkMode ? "sun" : "moon";
  lucide.createIcons();
}


/* ========= INIT ========= */
document.documentElement.classList.toggle("dark", darkMode);
applyTheme();
applyTranslations();
loadTaskContext();
</script>

</body>
</html>
