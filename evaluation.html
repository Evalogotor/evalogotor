<!DOCTYPE html>
<html lang="en" class="transition-colors">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>EVALOGOTOR - Tasks</title>

<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = { darkMode: 'class' }
</script>

<script src="https://unpkg.com/lucide@latest"></script>

<style>
  .highlight {
    font-weight: bold;
    font-size: 1.25rem;
    color: rgb(57, 220, 57);
  }
  .status-ue { color: #94a3b8; }
</style>
</head>

<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-white min-h-screen">

<!-- NAVBAR -->
<header class="fixed top-0 left-0 w-full z-50 flex justify-between px-6 py-4 bg-white dark:bg-gray-800 shadow">
  <div class="flex items-center">
    <span class="font-bold text-xl text-blue-600">EVA</span>
    <span class="highlight">LOGO</span>
    <span class="font-bold text-xl text-blue-600">TOR</span>
  </div>

  <nav class="flex items-center gap-4">

    <span id="home">Home</span>
    <span id="tasks">Tasks</span>
    <span id="scoreboard">Scoreboard</span>

    <button id="loginBtn" class="px-3 py-1 rounded-xl bg-white dark:bg-[rgb(17,24,38)] border">
      <span id="login">Login</span>
    </button>

    <button id="themeToggle" class="px-3 py-1 rounded-xl bg-white dark:bg-[rgb(17,24,38)] border">
      <span id="themeLabel">Dark</span>
    </button>

    <select id="langSelect"
      class="px-2 py-1 rounded-xl border bg-white dark:bg-[rgb(17,24,38)] text-gray-900 dark:text-white">
      <option value="en">EN</option>
      <option value="de">DE</option>
      <option value="it">IT</option>
      <option value="hr">HR</option>
      <option value="fr">FR</option>
      <option value="ru">RU</option>
    </select>

  </nav>
</header>

<!-- MAIN -->
<main class="max-w-5xl mx-auto pt-28 px-6 flex flex-col gap-4">

  <div id="taskContext"
    class="p-4 rounded-2xl bg-gray-100 dark:bg-gray-800 font-mono text-lg">
    empty
  </div>

  <textarea id="codeInput"
    class="h-64 p-3 rounded-lg bg-gray-100 dark:bg-gray-900 border"
    placeholder=""></textarea>

  <div class="flex items-center gap-4">
    <button id="evalBtn"
      class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl">
      Evaluate
    </button>

    <span id="evalStatus" class="status-ue font-semibold">
      Unevaluated
    </span>
  </div>

</main>

<script>
lucide.createIcons();

/* ===== TRANSLATIONS ===== */
const translations = {
  en: {
    home:"Home", tasks:"Tasks", scoreboard:"Scoreboard", login:"Login",
    dark:"Dark", light:"Light",
    evaluate:"Evaluate",
    unevaluated:"Unevaluated",
    placeholder:"Paste your solution code here...",
    warning:"⚠️ Please paste your solution before evaluation"
  },
  de: {
    home:"Home", tasks:"Aufgaben", scoreboard:"Rangliste", login:"Anmelden",
    dark:"Dunkel", light:"Hell",
    evaluate:"Auswerten",
    unevaluated:"Nicht bewertet",
    placeholder:"Lösungscode hier einfügen...",
    warning:"⚠️ Bitte Code vor der Auswertung einfügen"
  },
  hr: {
    home:"Home", tasks:"Zadaci", scoreboard:"Ljestvica", login:"Prijava",
    dark:"Tamno", light:"Svijetlo",
    evaluate:"Procijeni",
    unevaluated:"Neocijenjeno",
    placeholder:"Zalijepite ovdje rješenje...",
    warning:"⚠️ Unesite rješenje prije evaluacije"
  }
};

let lang = localStorage.getItem("lang") || "en";
let darkMode = localStorage.getItem("theme") === "dark";

const evalStatus = document.getElementById("evalStatus");
const codeInput = document.getElementById("codeInput");

/* ===== APPLY TRANSLATIONS ===== */
function applyTranslations() {
  const t = translations[lang];

  home.textContent = t.home;
  tasks.textContent = t.tasks;
  scoreboard.textContent = t.scoreboard;
  login.textContent = t.login;
  evalBtn.textContent = t.evaluate;
  codeInput.placeholder = t.placeholder;
  themeLabel.textContent = darkMode ? t.light : t.dark;

  // IMPORTANT: do NOT overwrite warning
  if (!evalStatus.classList.contains("text-red-500")) {
    evalStatus.textContent = t.unevaluated;
  }
}

/* ===== DARK MODE ===== */
function applyTheme() {
  document.documentElement.classList.toggle("dark", darkMode);
  themeLabel.textContent = darkMode
    ? translations[lang].light
    : translations[lang].dark;

  // Fix dropdown options
  document.querySelectorAll("#langSelect option").forEach(opt => {
    opt.style.backgroundColor = darkMode ? "rgb(17,24,38)" : "white";
    opt.style.color = darkMode ? "white" : "black";
  });
}

/* ===== EVENTS ===== */
langSelect.value = lang;
langSelect.onchange = e => {
  lang = e.target.value;
  localStorage.setItem("lang", lang);
  applyTranslations();
};

themeToggle.onclick = () => {
  darkMode = !darkMode;
  localStorage.setItem("theme", darkMode ? "dark" : "light");
  applyTheme();
};

evalBtn.onclick = () => {
  if (!codeInput.value.trim()) {
    evalStatus.textContent = translations[lang].warning;
    evalStatus.classList.add("text-red-500");
    return;
  }
};

codeInput.oninput = () => {
  if (codeInput.value.trim()) {
    evalStatus.textContent = translations[lang].unevaluated;
    evalStatus.classList.remove("text-red-500");
  }
};

/* ===== INIT ===== */
applyTranslations();
applyTheme();
</script>

</body>
</html>
