<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>EVALOGOTOR - Tasks</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<style>
  .highlight {
    font-weight: bold;
    font-size: 1.25rem;
    color: rgb(57, 220, 57);
  }

  /* ===== LEGACY BUTTON STYLE ===== */
  .legacy-btn {
    background-color: #333;
    color: white;
    border: 1px solid #444;
  }
  .legacy-btn:hover {
    background-color: rgb(57, 220, 57);
    color: white;
  }

  .legacy-select {
    background-color: #333;
    color: white;
    border: 1px solid #444;
  }
  .legacy-select option {
    background-color: #333;
    color: white;
  }
</style>
</head>

<body id="body"
  class="bg-gray-50 text-gray-900 min-h-screen flex flex-col transition-colors">

<!-- ================= NAVBAR ================= -->
<header
  class="fixed top-0 left-0 w-full z-50
         flex items-center justify-between px-6 py-4 shadow-sm
         bg-[#333] text-white">

  <!-- Logo -->
  <div class="flex items-center group cursor-pointer">
    <span class="font-bold text-xl group-hover:text-[rgb(57,220,57)]">EVA</span>
    <span class="highlight">LOGO</span>
    <span class="font-bold text-xl group-hover:text-[rgb(57,220,57)]">TOR</span>
  </div>

  <!-- Nav -->
  <nav class="flex items-center space-x-4">

    <button
      class="flex items-center space-x-1 rounded-xl px-3 py-1
             text-white hover:text-[rgb(57,220,57)]"
      onclick="location.href='/'">
      <i data-lucide="home" class="w-4 h-4"></i>
      <span>Home</span>
    </button>

    <button
      class="flex items-center space-x-1 rounded-xl px-3 py-1
             text-white hover:text-[rgb(57,220,57)]"
      onclick="location.href='tasks'">
      <i data-lucide="pen-tool" class="w-4 h-4"></i>
      <span>Tasks</span>
    </button>

    <button
      class="flex items-center space-x-1 rounded-xl px-3 py-1
             text-white hover:text-[rgb(57,220,57)]"
      onclick="location.href='scoreboard'">
      <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
      <span>Scoreboard</span>
    </button>

    <!-- Login -->
    <button
      id="loginBtn"
      class="legacy-btn rounded-xl flex items-center px-3 py-1"
      onclick="location.href='login'">
      <i data-lucide="user" class="w-4 h-4 mr-1"></i>
      Login
    </button>

    <!-- Theme -->
    <button
      id="themeToggle"
      class="legacy-btn rounded-xl flex items-center px-3 py-1">
      <i id="themeIcon" data-lucide="moon" class="w-4 h-4 mr-1"></i>
      <span id="themeLabel">Dark</span>
    </button>

    <!-- Language -->
    <div class="flex items-center rounded-xl px-2 py-1 legacy-select">
      <i data-lucide="globe" class="w-4 h-4 mr-1"></i>
      <select id="langSelect"
        class="bg-transparent focus:outline-none text-white">
        <option value="en">EN</option>
        <option value="de">DE</option>
        <option value="it">IT</option>
        <option value="hr">HR</option>
        <option value="fr">FR</option>
        <option value="ru">RU</option>
      </select>
    </div>

  </nav>
</header>

<!-- ================= MAIN ================= -->
<main class="max-w-5xl mx-auto w-full px-6 pt-28 pb-6 flex flex-col gap-4">

  <!-- Context bar -->
  <div class="rounded-2xl p-4 shadow
              bg-gray-100 dark:bg-gray-800
              font-mono text-sm flex flex-wrap gap-4">

    <span>Category:</span> <span id="ui-cat">empty</span>
    <span>Year:</span> <span id="ui-year">empty</span>

    <span id="ui-mid-label" class="hidden"></span>
    <span id="ui-mid" class="hidden"></span>

    <span>Task:</span> <span id="ui-task">empty</span>
  </div>

  <textarea
    class="h-64 w-full rounded-lg p-3 font-mono text-sm
           bg-gray-100 dark:bg-gray-900
           border border-gray-300 dark:border-gray-700"
    placeholder="Paste your solution code here..."></textarea>

</main>

<script>
lucide.createIcons();

/* ===== THEME (keeps legacy buttons unchanged) ===== */
let darkMode = localStorage.getItem("theme") === "dark";

function applyTheme() {
  document.documentElement.classList.toggle("dark", darkMode);
  document.getElementById("themeLabel").textContent =
    darkMode ? "Light" : "Dark";
  document.getElementById("themeIcon")
    .setAttribute("data-lucide", darkMode ? "sun" : "moon");
  lucide.createIcons();
}

document.getElementById("themeToggle").onclick = () => {
  darkMode = !darkMode;
  localStorage.setItem("theme", darkMode ? "dark" : "light");
  applyTheme();
};

/* ===== TASK CONTEXT ===== */
function loadTaskContext() {
  const kategorija = localStorage.getItem("kategorija") || "empty";
  const god        = localStorage.getItem("god") || "empty";
  const zadatak    = localStorage.getItem("zadatak") || "empty";
  const kolo       = localStorage.getItem("kolo");
  const razina     = localStorage.getItem("razina");

  document.getElementById("ui-cat").textContent = kategorija;
  document.getElementById("ui-year").textContent = god;
  document.getElementById("ui-task").textContent = zadatak;

  const midLabel = document.getElementById("ui-mid-label");
  const midValue = document.getElementById("ui-mid");

  midLabel.classList.add("hidden");
  midValue.classList.add("hidden");

  if (kategorija === "hll") {
    midLabel.textContent = "Kolo:";
    midValue.textContent = kolo || "empty";
    midLabel.classList.remove("hidden");
    midValue.classList.remove("hidden");
  } else if (kategorija !== "hloz") {
    midLabel.textContent = "Razina:";
    midValue.textContent = razina || "empty";
    midLabel.classList.remove("hidden");
    midValue.classList.remove("hidden");
  }
}

applyTheme();
loadTaskContext();
</script>

</body>
</html>
